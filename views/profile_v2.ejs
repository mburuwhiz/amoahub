<% layout('layouts/main_v2') -%>

<link rel="stylesheet" href="/css/profile.css">

<div class="profile-container-v2">
    <div class="profile-card-v2">
        <!-- Profile Header -->
        <div class="profile-header-v2">
            <img src="<%= user.photos && user.photos.length > 0 ? user.photos[0].url : '/img/default-cover.jpg' %>" alt="Cover Photo" class="cover-photo">
            <div class="profile-header-content-v2">
                <img src="<%= user.profileImage.url %>" alt="<%= user.displayName %>" class="profile-avatar-v2">
                <h1 class="profile-name-v2">
                    <%= user.displayName %>, <%= user.age %>
                    <% if (user.isVerified) { %> <i class="fas fa-check-circle" style="color: #007bff;"></i> <% } %>
                </h1>
            </div>
        </div>

        <!-- Profile Actions -->
        <div class="profile-actions-v2">
            <a href="/profile/edit" class="action-btn message"><i class="fas fa-edit"></i> Edit Profile</a>
            <a href="/photos/manage" class="action-btn report"><i class="fas fa-camera"></i> Manage Photos</a>
        </div>

        <!-- Profile Body -->
        <div class="profile-body-v2">
            <!-- Left Column -->
            <div class="profile-main-col-v2">
                <div class="profile-widget-v2">
                    <h3>About Me</h3>
                    <p><%= user.bio %></p>
                </div>
                <div class="profile-widget-v2">
                    <h3>My Gallery</h3>
                    <div class="gallery-grid-v2">
                        <% if (user.photos && user.photos.length > 0) { %>
                            <% user.photos.forEach(photo => { %>
                                <div class="gallery-item-v2">
                                    <img src="<%= photo.url %>" alt="Gallery photo">
                                </div>
                            <% }) %>
                        <% } else { %>
                            <p>You haven't added any photos to your gallery yet.</p>
                        <% } %>
                    </div>
                </div>
            </div>

            <!-- Right Column (Sidebar) -->
            <div class="profile-sidebar-col-v2">
                <div class="profile-widget-v2">
                    <h3>Details</h3>
                    <ul class="details-list-v2">
                        <li><strong>Location:</strong> <span><%= user.location %></span></li>
                        <li><strong>Work:</strong> <span><%= user.work %></span></li>
                        <li><strong>Gender:</strong> <span><%= user.gender %></span></li>
                    </ul>
                </div>
                <div class="profile-widget-v2">
                    <h3>My Interests</h3>
                    <div class="interests-tags-v2">
                         <% if (user.interests && user.interests.length > 0) { %>
                            <% user.interests.forEach(interest => { %>
                                <span class="interest-tag"><%= interest %></span>
                            <% }) %>
                        <% } else { %>
                            <p>No interests listed.</p>
                        <% } %>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>