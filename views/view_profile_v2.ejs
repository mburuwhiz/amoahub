<link rel="stylesheet" href="/css/profile.css">

<div class="profile-container-v2">
    <div class="profile-card-v2">
        <!-- Profile Header -->
        <div class="profile-header-v2">
            <img src="<%= (profile.photos && profile.photos.length > 0) ? profile.photos[0].url : '/img/default-cover.jpg' %>" alt="Cover Photo" class="cover-photo">
            <div class="profile-header-content-v2">
                <img src="<%= (profile.profileImage && profile.profileImage.url) ? profile.profileImage.url : '/img/default-avatar.png' %>" alt="<%= profile.displayName %>" class="profile-avatar-v2">
                <h1 class="profile-name-v2">
                    <%= profile.displayName %>, <%= profile.age %>
                    <% if (profile.isVerified) { %> <i class="fas fa-check-circle" style="color: #007bff;"></i> <% } %>
                </h1>
            </div>
        </div>

        <!-- Profile Actions -->
        <div class="profile-actions-v2">
            <a href="/chats/<%= profile._id %>" class="action-btn message"><i class="fas fa-comments"></i> Message</a>
            <button id="report-btn" class="action-btn report"><i class="fas fa-flag"></i> Report</button>
            <button id="block-btn" class="action-btn block"><i class="fas fa-ban"></i> Block</button>
        </div>

        <!-- Profile Body -->
        <div class="profile-body-v2">
            <!-- Left Column -->
            <div class="profile-main-col-v2">
                <div class="profile-widget-v2">
                    <h3>About Me</h3>
                    <p><%= profile.bio %></p>
                </div>
                <div class="profile-widget-v2">
                    <h3>Gallery</h3>
                    <div class="gallery-grid-v2">
                        <% if (profile.photos && profile.photos.length > 0) { %>
                            <% profile.photos.forEach(photo => { %>
                                <div class="gallery-item-v2">
                                    <img src="<%= photo.url %>" alt="Gallery photo">
                                </div>
                            <% }) %>
                        <% } else { %>
                            <p>This user has not uploaded any photos yet.</p>
                        <% } %>
                    </div>
                </div>
            </div>

            <!-- Right Column (Sidebar) -->
            <div class="profile-sidebar-col-v2">
                <div class="profile-widget-v2">
                    <h3>Details</h3>
                    <ul class="details-list-v2">
                        <li><strong>Location:</strong> <span><%= profile.location %></span></li>
                        <li><strong>Work:</strong> <span><%= profile.work %></span></li>
                        <li><strong>Gender:</strong> <span><%= profile.gender %></span></li>
                    </ul>
                </div>
                <div class="profile-widget-v2">
                    <h3>Interests</h3>
                    <div class="interests-tags-v2">
                        <% if (profile.interests && profile.interests.length > 0) { %>
                            <% profile.interests.forEach(interest => { %>
                                <span class="interest-tag"><%= interest %></span>
                            <% }) %>
                        <% } else { %>
                            <p>No interests listed.</p>
                        <% } %>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
document.getElementById('report-btn').addEventListener('click', () => {
    // Logic for reporting a user
    Swal.fire('Report User', 'This feature is coming soon!', 'info');
});

document.getElementById('block-btn').addEventListener('click', () => {
    // Logic for blocking a user
    Swal.fire('Block User', 'This feature is coming soon!', 'info');
});
</script>